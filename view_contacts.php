<?php session_start(); require_once __DIR__.'/../includes/config.php'; if (empty($_SESSION['admin_logged_in'])) { header('Location: login.php'); exit; } try { $pdo = new PDO("mysql:host={$db_host};dbname={$db_name};charset=utf8mb4", $db_user, $db_pass, [PDO::ATTR_ERRMODE=>PDO::ERRMODE_EXCEPTION]); $stmt = $pdo->query('SELECT * FROM contacts ORDER BY created_at DESC'); $rows = $stmt->fetchAll(PDO::FETCH_ASSOC); } catch (Exception $e) { $rows=[]; } ?><!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Contacts</title><link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css' rel='stylesheet'></head><body><div class='container py-4'><h3>Contacts</h3><table class='table'><thead><tr><th>Name</th><th>Phone</th><th>Message</th><th>When</th></tr></thead><tbody><?php foreach($rows as $r): ?><tr><td><?php echo htmlspecialchars($r['name']); ?></td><td><?php echo htmlspecialchars($r['phone']); ?></td><td><?php echo htmlspecialchars($r['message']); ?></td><td><?php echo htmlspecialchars($r['created_at']); ?></td></tr><?php endforeach; ?></tbody></table><a href='dashboard.php' class='btn btn-secondary'>Back</a></div></body></html>